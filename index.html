<!DOCTYPE html>
<html>
<head>
  <script src="vendor/underscore.js"></script>
  <script src="vendor/jquery.js"></script>
  <script src="vendor/backbone.js"></script>
  <script src="lib/backbone-file-editor.js"></script>

  <style>
    .directory {
      background-image: url('img/folder.png');
      background-repeat: no-repeat;
    }

    .directory_open {
      background-image: url('img/folderopen.png');
    }

    .directory_icon_button {
      display: block;
      float: left;
      width: 28px;
      height: 16px;
    }

    .level { padding-left: 10px; }
  </style>
</head>

<body>
  <div id='explorer'></div>

  <p>
    <a id='updateLink' href='#'>Simulate an update via AJAX</a>
  </p>
</body>

<script>
$(document).ready(function() {
  var dir = new Directory({
    name: 'main',
    parent: 'test'
  });

  /* Directory data can be defind in two ways. One is using an API as
   * shown below.
   */

  dir.addDir({name: 'stuff'})
     .addDir({name: 'goat'})
     .addDir({name: 'rob'});

  dir.addDir({name: 'bing'});
  dir.addFile({name: 'file.png'});

  /* Directory data can also be defined by feeding the explorer a JSON
   * representation of a directory structure.
   *
   * The below representation is similar to the structure above, except
   * "file.png" has been removed.
   */

  var dirSlightlyAlteredAndInJSON = {
    name: 'main',
    parent: 'test',
    children: [
      {
        name: 'stuff',
        children: [
          {
            name: 'goat',
            children: [
              {
                name: 'rob',
                children: []
              }
            ]
          }
        ]
      },
      {
        name: 'bing',
        children: []
      }
    ]
  };

  var fileExplorer = new FileExplorer({
    el:                $('#explorer'),
    directory:         dir,
    levelTemplate: $('#template-dir-level').html(),
    entryTemplate:     $('#template-dir-entry').html()
  });

  // example of how the explorer can be updated
  $('#updateLink').click(function() {
    fileExplorer.structure = dirSlightlyAlteredAndInJSON;
    fileExplorer.render();
  });
});
</script>

<script type="text/template" id='template-dir-level'>
  <div class="level"></div>
</script>

<script type="text/template" id='template-dir-entry'>
  <div>
    <span class="directory_icon_button"></span>
    <span class="template_dir_entry_name"><%= name %></span>
  </div>
</script>

</html>
